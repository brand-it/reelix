{% import "_poster.html" as macros %}

<div class="row">
  <div class="col show-img-posters">
    <a class="btn img-poster-btn p-0 mb-2 m-0" href="/tv/{{ tv.id }}">
      {{
      macros::poster_stack(
      front_poster_path=season.poster_path,
      front_name=season.name,
      front_original_name=season.name,
      back_poster_path=tv.poster_path,
      back_name=tv.name,
      back_original_name=tv.original_name
      )
      }}
    </a>
  </div>
  <div class="col" style="width: 75%;">
    <h3 class="tv-name">
      <i class="fa fa-film" data-prefix="fas" data-icon="film"></i>
      <a class="link-light link-opacity-50-hover link-underline-opacity-25 pb-1" href="/tv/{{ tv.id }}">{{ tv.name_year
        }}</a>
      <small class="text-body-secondary">{{ season.name }}</small>
    </h3>
    <div class='tv-facts'>
      <span>{{ tv.first_air_date }}</span>
      {% for genre in tv.genres %}
      <span class="badge rounded-pill text-bg-secondary">
        {{ genre.name }}
      </span>
      {% endfor %}
    </div>
    <div class="tv-description">
      <p>
        {{ tv.overview }}
      </p>
    </div>
  </div>
</div>

<div class="container my-4">
  <!-- Single Episode Card (repeat for each episode) -->
  <div class="episode-card row p-0 shadow-sm p-3 mb-5 bg-body-tertiary rounded">
    <!-- Poster Image -->
    <div class="episode-image col-auto p-0">
      <a href="https://www.themoviedb.org/tv/19885-sherlock/season/3/episode/1"
        title="Sherlock: Series 3 (2014): Episode 1 - The Empty Hearse">
        <img src="https://media.themoviedb.org/t/p/w227_and_h127_bestv2/zXsOogQ8BVyvWUR2zgs6NBxkReX.jpg"
          srcset="https://media.themoviedb.org/t/p/w227_and_h127_bestv2/zXsOogQ8BVyvWUR2zgs6NBxkReX.jpg 1x, https://media.themoviedb.org/t/p/w454_and_h254_bestv2/zXsOogQ8BVyvWUR2zgs6NBxkReX.jpg 2x"
          alt="The Empty Hearse" loading="lazy">
      </a>
    </div>

    <!-- Episode Info -->
    <div class="col">
      <div class="d-flex align-items-start mb-1 pt-2">
        <!-- Episode Number -->
        <span class="episode-number">1</span>

        <!-- Title & Rating/Date block -->
        <div class="flex-grow-1">
          <h3 class="h5 mb-0">
            <a class="text-decoration-none" href="/tv/19885-sherlock/season/3/episode/1"
              title="Sherlock: Series 3 (2014): Episode 1 - The Empty Hearse">
              The Empty Hearse
            </a>
          </h3>

          <div class="d-flex align-items-center flex-wrap" style="gap: 0.75rem;">
            <!-- Rating using Font Awesome Star Icon -->
            <span class="badge bg-primary">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon text-white"
                viewBox="0 0 576 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                <path fill="currentColor"
                  d="M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z" />
              </svg> 77%
            </span>
            <!-- Air Date & Runtime -->
            <div class="text-muted">
              January&nbsp;1, 2014 • 1h&nbsp;27m
            </div>
          </div>
        </div>
      </div>

      <!-- Episode Overview -->
      <div class="episode-overview mb-2">
        <p class="mb-1">
          Two years on from reports of his Reichenbach Fall demise, Sherlock resurfaces
          as London comes under threat of a huge terrorist attack. John, though, has mixed
          feelings – he's delighted by the return of his best friend, but harbours worries that
          the consulting detective's reappearance will have an adverse affect on his settled
          domestic life, in particular his romance with Mary Morstan.
        </p>
        <a href="/tv/19885-sherlock/season/3/episode/1" class="small">
          Read More
        </a>
      </div>

      <!-- Parts Selector (4 Parts) -->
      <div class="parts-selector pb-3">
        <div class="row g-2 align-items-center mb-2">
          <label for="part1" class="col-auto col-form-label fw-bold">Part 1*</label>
          <div class="col">
            <select id="part1" class="form-select form-select-sm" required>
              <option value="">Select a Disk Title</option>
              <option value="1">Main Feature (01:30:00)</option>
              <option value="2">Bonus Scenes (00:45:00)</option>
            </select>
          </div>
        </div>

        <div class="row g-2 align-items-center mb-2">
          <label for="part2" class="col-auto col-form-label fw-bold">Part 2</label>
          <div class="col">
            <select id="part2" class="form-select form-select-sm">
              <option value="">None</option>
              <option value="1">Main Feature (01:30:00)</option>
              <option value="2">Bonus Scenes (00:45:00)</option>
            </select>
          </div>
        </div>

        <div class="row g-2 align-items-center mb-2">
          <label for="part3" class="col-auto col-form-label fw-bold">Part 3</label>
          <div class="col">
            <select id="part3" class="form-select form-select-sm">
              <option value="">None</option>
              <option value="1">Main Feature (01:30:00)</option>
              <option value="2">Bonus Scenes (00:45:00)</option>
            </select>
          </div>
        </div>

        <div class="row g-2 align-items-center">
          <label for="part4" class="col-auto col-form-label fw-bold">Part 4</label>
          <div class="col">
            <select id="part4" class="form-select form-select-sm">
              <option value="">None</option>
              <option value="1">Main Feature (01:30:00)</option>
              <option value="2">Bonus Scenes (00:45:00)</option>
            </select>
          </div>
        </div>
        <small class="text-muted d-block mt-1">
          * Part 1 is required; additional parts are optional.
        </small>
      </div>
    </div>
  </div>
  <!-- /Single Episode Card -->

</div>
